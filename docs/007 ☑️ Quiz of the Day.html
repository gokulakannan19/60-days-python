<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>

    <style>
      body {
        font-family: sf pro text, -apple-system, BlinkMacSystemFont, Roboto,
          segoe ui, Helvetica, Arial, sans-serif, apple color emoji,
          segoe ui emoji, segoe ui symbol;
        font-weight: 400;
        line-height: 22.4px;
        font-size: 16px;
      }
      p,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      ul,
      ol {
        font-size: 16px;
        font-weight: 400;
      }
      ul {
        list-style: none;
        margin: 0;
        padding: 0;
        max-width: none;
      }
      code {
        background-color: #fff;
        border: 1px solid #d1d7dc;
        color: #b4690e;
        font-size: 90%;
        padding: 0.2rem 0.4rem;
      }
      .quiz-content {
        padding: 2.4rem;
        word-break: break-word;
        max-width: 86rem;
        margin: 0 auto;
      }
      .quiz-container {
        margin: 0 auto;
        max-width: 84rem;
        padding: 0;
      }
      .question {
        margin-bottom: 5rem;
      }
      .question span {
        font-size: 24px;
        font-weight: 700;
      }
      .question-prompt {
        margin-top: 0.8rem;
        font-weight: 700;
      }
      .question-answer {
        margin-top: 1.6rem;
        padding-left: 0;
        box-sizing: border-box;
      }
      .question-answer label {
        max-width: 80rem;
        position: relative;
        cursor: pointer;
        display: flex;
        min-width: 18rem;
        border: solid #1c1d1f 2px;
      }
      .question-answer div {
        display: flex;
        align-items: center;
        padding: 0.5rem;
        width: 100%;
      }
      .question-answer div:hover {
        background-color: #f5f5f5;
      }
      .question-answer input {
        display: none;
      }
      .question-answer span {
        width: 1rem;
        height: 1rem;
        margin-right: 1.6rem;
        top: 0;
        border-radius: 50%;
        display: inline-block;
        flex-shrink: 0;
        border: 0.2rem solid #1c1d1f;
        position: relative;
      }
      .selected {
        background: #1c1d1f;
        box-shadow: 0 0 0 0.4rem #fff inset;
      }
      .score {
              position: fixed;
            }
    </style>
  </head>

  <body onload="main()">
    <div id="score" class="score">
      <span>Score: N/A of N/A</span>
    </div>
    <div id="quiz-container" class="quiz-content"></div>

    <script>
      const quizData = {"pass_percent": 70, "questions": [{"_class": "assessment", "id": 47140302, "assessment_type": "multiple-choice", "prompt": {"question": "<p>Select the code that has the correct syntax.</p>", "relatedLectureIds": "", "feedbacks": ["The syntax of match-case starts with \"match\" in the first line, not with \"case\".", "Yes, this code would not returns a syntax error."], "answers": ["<pre class=\"prettyprint linenums\">name = \"john\"\n\ncase name:\n    match \"john\"\n        print(\"It's a match\")\n    match \"naya\":\n        print(\"Nope\")</pre>", "<pre class=\"prettyprint linenums\">name = \"john\"\n\nmatch name:\n&nbsp; &nbsp; case \"john\":\n&nbsp; &nbsp; &nbsp; &nbsp; print(\"It's a match\")\n&nbsp; &nbsp; case \"naya\":\n&nbsp; &nbsp; &nbsp; &nbsp; print(\"Nope\")</pre>"]}, "correct_response": ["b"], "section": "", "question_plain": "Select the code that has the correct syntax.", "related_lectures": []}, {"_class": "assessment", "id": 47140334, "assessment_type": "multiple-choice", "prompt": {"question": "<p>Take a look at the code below.</p><pre class=\"prettyprint linenums\">for item in [\"hello\", \"hi\"]:\n    print(item.upper())</pre><p>Select the WRONG&nbsp;statement about the code.</p>", "relatedLectureIds": "", "feedbacks": ["This is true. The upper() method which converts strings to uppercase will be applied to both strings in the list. ", "This is a WRONG statement about the code, and therefore the correct answer of this question. The list has two items. Therefore, the for-loop will also iterate two times thus executing the print() function not three, but two times.", "", "This is true. The for-loop will execute the second line where the upper() method is two times. "], "answers": ["<p>The code converts all the words of the list to uppercase.</p>", "<p>The code executes the print() function three times.</p>", "<p>The code prints out two words, each in one line.</p>", "<p>The code contains a for-loop that executes the <code>upper()</code> method two times. </p>"]}, "correct_response": ["b"], "section": "", "question_plain": "Take a look at the code below.for item in [\"hello\", \"hi\"]:\n    print(item.upper())Select the WRONG&nbsp;statement about the code.", "related_lectures": []}, {"_class": "assessment", "id": 47140596, "assessment_type": "multiple-choice", "prompt": {"question": "<p>What output does the following code produce?&nbsp;Please try to answer without running the code on your IDE if you can.</p><pre class=\"prettyprint linenums\">names =[\"Dalay\", \"Smith\", \"Apex\"]\n\nfor name in names:\n    print(\"Next one is: \")\n    print(name)</pre>", "relatedLectureIds": "", "feedbacks": ["This is not the output that the code produces. The code first executes print(\"Next one is:\") and immediately after that it executes print(name). Therefore, \"Next one is:\" is always followed by the next name in the list.", "This is the correct answer. The code prints out \"Next one is: \" and then the next item in the list. This cycle happens three times.", "This output contains \"Apex\" as the first name to be printed out. However, \"Delay\" is the first name in the list, therefore \"Delay\" will be the first name to be printed out."], "answers": ["<pre class=\"prettyprint linenums\">Next one is: \nNext one is:\nNext one is:\nDalay\nSmith\nApex</pre>", "<pre class=\"prettyprint linenums\">Next one is: \nDalay\nNext one is: \nSmith\nNext one is: \nApex</pre>", "<pre class=\"prettyprint linenums\">Next one is: \nApex\nNext one is: \nSmith\nNext one is: \nDalay</pre>"]}, "correct_response": ["b"], "section": "", "question_plain": "What output does the following code produce?&nbsp;Please try to answer without running the code on your IDE if you can.names =[\"Dalay\", \"Smith\", \"Apex\"]\n\nfor name in names:\n    print(\"Next one is: \")\n    print(name)", "related_lectures": []}, {"_class": "assessment", "id": 47140474, "assessment_type": "multiple-choice", "prompt": {"question": "<p>Select the code snippet that produces a different output from the other two. Try to answer without running the code on your IDE if you can.</p>", "relatedLectureIds": "", "feedbacks": ["This code produces the same output as the code in alternative 2. Therefore, this is not the correct answer.", "This code produces the same output as the code in alternative 1. Therefore, this is not the correct answer.", "In this code, the items of the days list will not be printed out because there is no print function in \"i.capitalize()\". In contrast, the other two code snippets will print out the lists."], "answers": ["<pre class=\"prettyprint linenums\">days =[\"mon\", \"tue\", \"wed\"]\n\nfor day in days:\n    day = day.capitalize()\n    print(day)\n    print(\"Nice&nbsp;day\")</pre>", "<pre class=\"prettyprint linenums\">days =[\"Mon\", \"Tue\", \"Wed\"]\n\nfor i in days:\n    print(i.capitalize())\n    print(\"nice&nbsp;day\".capitalize())</pre>", "<pre class=\"prettyprint linenums\">days =[\"mon\", \"tue\", \"wed\"]\n\nfor i in days:\n    i.capitalize()\n    print(\"Nice day\")</pre>"]}, "correct_response": ["c"], "section": "", "question_plain": "Select the code snippet that produces a different output from the other two. Try to answer without running the code on your IDE if you can.", "related_lectures": []}]};
      var correct = 0;
      var total = 0;
      const questionData = quizData.questions
      const passPercent = quizData.pass_percent

      function main() {
        total = questionData.length;

        var questions = [];
        for (var i = 0; i < questionData.length; i++) {
          var question = questionData[i];
          var questionText = question.prompt.question;
          var answers = question.prompt.answers;
          var correctAnswer = question.correct_response[0];
          var correctAnswerText = answers[correctAnswer.charCodeAt(0) - 97];
          var questionObj = {
            question: questionText,
            correctAnswer: correctAnswerText,
            answers: answers,
            id: question.id,
          };
          questions.push(questionObj);
        }

        updateScore();

        // display the questions
        var questionsContainer = document.getElementById("quiz-container");
        for (var i = 0; i < questions.length; i++) {
          var question = questions[i];
          var questionElement = document.createElement("form");
          questionElement.className = "question";
          questionElement.innerHTML =
            "<span>Question " +
            (i + 1) +
            ":</span>" +
            '<div class="question-prompt">' +
            question.question +
            "</div>";
          questionElement.id = question.id;
          questionElement.classList.add("quiz-container");
          var answersElement = document.createElement("ul");
          answersElement.className = "answers";
          for (var j = 0; j < question.answers.length; j++) {
            var answer = question.answers[j];
            var answerElement = document.createElement("li");
            answerElement.className = "answer";
            answerElement.innerHTML =
              '<label for="input-' +
              question.id +
              "-" +
              j +
              '"><div onclick="select(' +
              question.id +
              ", " +
              j +
              ')"><span></span><input id="input-' +
              question.id +
              "-" +
              j +
              '" type="radio" name="question' +
              i +
              '" value="' +
              j +
              '">' +
              answer +
              "</input></div></label>";
            answerElement.classList.add("question-answer");
            answersElement.appendChild(answerElement);
          }

          questionElement.appendChild(answersElement);

          // add a submit button
          var submitButton = document.createElement("button");
          submitButton.className = "submit";
          submitButton.innerHTML = "Submit";
          submitButton.classList.add("submit-button");

          submitButton.addEventListener("click", function (e) {
            e.preventDefault();
            var questionElement = e.target.parentElement;
            var questionId = questionElement.id;
            var question = questions.filter(function (q) {
              return q.id == questionId;
            })[0];

            // set the border color of all answers to black
            var answers = questionElement.getElementsByClassName("answer");
            for (var i = 0; i < answers.length; i++) {
              console.log(answers[i]);
              answers[i].children[0].style.borderColor = "#1c1d1f";
            }

            var answer = questionElement.querySelector(
              'input[type="radio"]:checked'
            );
            if (answer) {
              var answerIndex = answer.value;
              var answerText = question.answers[answerIndex];
              if (answerText == question.correctAnswer) {
                answer.parentElement.parentElement.style.borderColor =
                  "limegreen";
                // alert("Correct!");
                correct++;
                updateScore();
              } else {
                answer.parentElement.parentElement.style.borderColor = "red";
                // alert("Incorrect!");
              }
            } else {
              alert("Please select an answer.");
            }
          });

          // add button
          questionElement.appendChild(submitButton);

          questionsContainer.appendChild(questionElement);
        }
      }

      function select(question, answer) {
        var questionElement = document.getElementById(question);
        var answers = questionElement.getElementsByClassName("answer");
        for (var i = 0; i < answers.length; i++) {
          var span = answers[i].children[0].children[0].children[0];
          var input = answers[i].children[0].children[0].children[1];
          span.classList.remove("selected");
          input.checked = false;
        }
        var span = answers[answer].children[0].children[0].children[0];
        var input = answers[answer].children[0].children[0].children[1];
        span.classList.add("selected");
        input.checked = true;
      }

      function updateScore() {
        var scoreElem = document.getElementById("score");
        const score = (correct / total) * 100;
        scoreElem.innerHTML = "Score: " + score + "/" + passPercent + "%";
      }
    </script>
  </body>
</html>
